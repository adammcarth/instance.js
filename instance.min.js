/*!
  instance.js v1.0.0: A lightweight javascript library to model data on the client side
  before sending it off to the server.
  Created by @adammcarth under the MIT license
*/
function Instance(e){this.attributes={};if(e.defaults){this.defaults=e.defaults;this.attributes=Object.create(this.defaults)}this.name=e.name;this.url=e.url;this.method=e.method;this.headers=e.headers;this.success=e.success;this.error=e.error;this.fields=[];this.elements=[]}Instance.prototype.add=function(e){for(var t in e){if(e.hasOwnProperty(t)){var n=e[t];this.attributes[t]=n}}};Instance.prototype.addField=function(e){if(typeof e==="string"){e=[].concat(e)}this.fields=this.fields.concat(e)};Instance.prototype.addElement=function(e){if(typeof e==="string"){e=[].concat(e)}this.elements=this.elements.concat(e)};Instance.prototype.get=function(e){this.fields.forEach(function(e){var t=document.getElementsByName(e)[0];if(t===undefined||t.value===""){this.attributes[e]=undefined}else{this.attributes[e]=t.value}},this);this.elements.forEach(function(e){var t=document.getElementById(e);if(t===null||t.innerHTML===""){this.attributes[e]=undefined}else{this.attributes[e]=t.innerHTML}},this);if(e){return this.attributes[e]}else{return this.attributes}};Instance.prototype.remove=function(e){if(typeof e==="string"){e=[].concat(e)}e.forEach(function(e){delete this.attributes[e]},this)};Instance.prototype.reset=function(){this.attributes={};if(this.defaults){this.attributes=this.defaults}};Instance.prototype.clear=function(){this.attributes={}};Instance.prototype.send=function(e,t){var n=this;var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState===4){if(r.status===200){n.success(this.responseText)}else{n.error(r.status,this.responseText)}}};t=t||this.method||"POST";t=t.toUpperCase();e=e||this.url||"./";var i="";for(var s in this.get()){if(this.get().hasOwnProperty(s)){i+="&";if(this.get(s)===undefined){var o=""}else{var o=encodeURIComponent(this.get(s))}if(this.name){i+=this.name+"["+s+"]"+"="+o}else{i+=s+"="+o}}}if(t==="GET"){e=e+"?"+i}r.open(t,e,true);r.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(this.headers){for(var u in this.headers){if(this.headers.hasOwnProperty(u)){r.setRequestHeader(u,this.headers[u])}}}r.send(i)}