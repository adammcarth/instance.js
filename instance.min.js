/*!
  instance.js v1.0.0: A lightweight javascript library to model data on the client side
  before sending it off to the server.
  Created by @adammcarth under the MIT license
*/
function Instance(e){this.attributes={};if(e.defaults){this.defaults=e.defaults;this.attributes=Object.create(this.defaults)}this.name=e.name;this.url=e.url;this.method=e.method;this.headers=e.headers;this.success=e.success;this.error=e.error;this.fields=[];this.elements=[]}Instance.prototype.add=function(e){for(var t in e){var n=e[t];this.attributes[t]=n}};Instance.prototype.addField=function(e){if(typeof e==="string"){e=[].concat(e)}this.fields=this.fields.concat(e)};Instance.prototype.addElement=function(e){if(typeof e==="string"){e=[].concat(e)}this.elements=this.elements.concat(e)};Instance.prototype.get=function(e){this.fields.forEach(function(e){var t=document.getElementsByName(e)[0];if(t===undefined||t.value===""){this.attributes[e]=undefined}else{this.attributes[e]=t.value}},this);this.elements.forEach(function(e){var t=document.getElementById(e);if(t===undefined||t.innerHTML===""){this.attributes[e]=undefined}else{this.attributes[e]=t.innerHTML}},this);if(e){return this.attributes[e]}else{return this.attributes}};Instance.prototype.remove=function(e){if(typeof e==="string"){e=[].concat(e)}e.forEach(function(e){delete this.attributes[e]},this)};Instance.prototype.reset=function(){this.attributes={};if(this.defaults){this.attributes=this.defaults}};Instance.prototype.clear=function(){this.attributes={}};Instance.prototype.send=function(e,t){self=this;var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState==4){if(n.status==200){self.success(this.responseText)}else{self.error(n.status,this.responseText)}}};t=t||this.method||"POST";t=t.toUpperCase();e=e||this.url||"./";parameters="";for(var r in this.get()){parameters+="&";if(this.get(r)===undefined){param_value=""}else{param_value=encodeURIComponent(this.get(r))}if(this.name){parameters+=this.name+"["+r+"]"+"="+param_value}else{parameters+=r+"="+param_value}}if(t==="GET"){e=e+"?"+parameters}n.open(t,e,true);n.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(this.headers){for(var i in this.headers){n.setRequestHeader(i,this.headers[i])}}n.send(parameters)}