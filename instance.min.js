/*!
  instance.js v1.0.0: A lightweight javascript library to model data on the client side
  before sending it off to the server.
  Created by @adammcarth under the MIT license
*/
(function(e){function n(e){var t=[];if(typeof e==="string"){return t.concat(e)}return e}var t=function(e){this.attributes={};if(e.defaults){this.defaults=e.defaults;this.attributes=Object.create(this.defaults)}this.name=e.name;this.url=e.url;this.method=e.method;this.headers=e.headers;this.success=e.success;this.error=e.error;this.fields=[];this.elements=[]};t.prototype.add=function(e){var t;for(var n in e){if(e.hasOwnProperty(n)){t=e[n];this.attributes[n]=t}}};t.prototype.addField=function(e){e=n(e);this.fields=this.fields.concat(e)};t.prototype.addElement=function(e){e=n(e);this.elements=this.elements.concat(e)};t.prototype.get=function(e){var t,n;this.fields.forEach(function(e){t=document.getElementsByName(e)[0];if(t===undefined||t.value===""){this.attributes[e]=undefined}else{this.attributes[e]=t.value}},this);this.elements.forEach(function(e){n=document.getElementById(e);if(n===null||n.innerHTML===""){this.attributes[e]=undefined}else{this.attributes[e]=n.innerHTML}},this);if(e){return this.attributes[e]}else{return this.attributes}};t.prototype.remove=function(e){if(typeof e==="string"){e=[].concat(e)}e.forEach(function(e){delete this.attributes[e]},this)};t.prototype.reset=function(){this.attributes={};if(this.defaults){this.attributes=this.defaults}};t.prototype.clear=function(){this.attributes={}};t.prototype.send=function(e,t){var n=this,r=new XMLHttpRequest,i="",s="";r.onreadystatechange=function(){if(r.readyState===4){if(r.status===200){n.success(this.responseText)}else{n.error(r.status,this.responseText)}}};t=t||this.method||"POST";t=t.toUpperCase();e=e||this.url||"./";for(var o in this.get()){if(this.get().hasOwnProperty(o)){i+="&";if(this.get(o)===undefined){s=""}else{s=encodeURIComponent(this.get(o))}if(this.name){i+=this.name+"["+o+"]"+"="+s}else{i+=o+"="+s}}}if(t==="GET"){e=e+"?"+i}r.open(t,e,true);r.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(this.headers){for(var u in this.headers){if(this.headers.hasOwnProperty(u)){r.setRequestHeader(u,this.headers[u])}}}r.send(i)};e.Instance=t})(window)